from os import listdir, path
from fnmatch import fnmatch

def findfile(root, includes, excludes):
	return list(iterfile(root, includes, excludes))

def iterfile(root, includes, excludes):
	assert path.isdir(root)
	for f in listdir(root):
		p = path.join(root, f)
		print(p)
		if match(p, excludes):
			continue

		if path.isfile(p):
			if match(p, includes):
				yield p
		else:
			for f in findfile(p, includes, excludes):
				yield f

def match(p, patterns):
	for pattern in patterns:
		if fnmatch(p, pattern):
			return True
	return False
